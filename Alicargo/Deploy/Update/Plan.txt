Релиз.
+ Подготовка нового сайта:
-- Обновить конфиги
--- Соединение с новой БД (Web.Release.config, backup-db-alicargo_1_1.ps1)
--- Настройка рассылки (Web.Release.config)
++ Подготовить пакет с новой версией сайта ($\Deploy\Update\prepare.ps1)
-- Формируем скрипт обновления сайта на сервере
-- Заливаем пакет в репозиторий

- Забираем пакет в папке на сервере
- Скриптом обновления:
-- Востанавливаем бекап текущей версии в новую БД
-- Подготовить скрипты обновления схемы БД на новую версию.
-- Подготовить скрипты домиграции свежих данных в БД.
-- Запускаем скрипты обновления БД

- Запустить новый сайт
- Задать пул новому сайту
- Протестировать функционал
- Проверить логирование
- Перенастроить шедулер бекапа на новую БД
- Забекапить последний бекап старой БД в папке со старым сайтом
- Выключить старый сайт
- Дозалить новые данные из старой БД в новую
- Перенаправить старый адрес на новую папку
- Проверить доступрость нового сайта по рабочему адресу
- Старый сайт остается лежать выключенным на случай отката


Откат
- Выключить новый сайт
- Дозалить новые данные из новой БД в старую
- Включить старый сайт
- Перенаправить рабочий адрес на старый сайт
- Перенастроить шедулер бекапа на старую БД